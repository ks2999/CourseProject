<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–¥–∞—á–∏ - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–±—É—á–µ–Ω–∏—è</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/code-editor.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéì –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –æ–±—É—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é</h1>
            <nav>
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a>
                <a href="progress.html">–ü—Ä–æ–≥—Ä–µ—Å—Å</a>
                <a href="lessons.html">–£—Ä–æ–∫–∏</a>
                <a href="tasks.html" class="active">–ó–∞–¥–∞—á–∏</a>
                <a href="achievements.html">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
                <button onclick="logout()">–í—ã–π—Ç–∏</button>
            </nav>
        </header>

        <main>
            <div class="tasks-layout">
                <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
                <aside class="tasks-sidebar">
                    <div class="tasks-header">
                        <h2>–ó–∞–¥–∞—á–∏</h2>
                        <button id="create-task-btn" class="btn btn-primary btn-small" style="display: none;" onclick="openCreateTaskModal()">
                            + –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                        </button>
                    </div>
                    <div class="tasks-filter">
                        <select id="difficulty-filter">
                            <option value="">–í—Å–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</option>
                            <option value="EASY">–õ–µ–≥–∫–∏–µ</option>
                            <option value="MEDIUM">–°—Ä–µ–¥–Ω–∏–µ</option>
                            <option value="HARD">–°–ª–æ–∂–Ω—ã–µ</option>
                            <option value="EXPERT">–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ</option>
                        </select>
                    </div>
                    <div id="tasks-list" class="tasks-list">
                        <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</p>
                    </div>
                </aside>

                <!-- –û–±–ª–∞—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
                <section class="task-workspace">
                    <div id="no-task-selected" class="no-task-selected">
                        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É –∏–∑ —Å–ø–∏—Å–∫–∞</h2>
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É —Å–ª–µ–≤–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –µ—ë —Ä–µ—à–µ–Ω–∏–µ</p>
                    </div>

                    <div id="task-content" style="display: none;">
                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞—á–µ -->
                        <div class="task-header">
                            <h2 id="task-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</h2>
                            <div class="task-meta">
                                <span class="task-difficulty" id="task-difficulty">EASY</span>
                                <span class="task-xp">‚≠ê <span id="task-xp-reward">10</span> XP</span>
                            </div>
                        </div>

                        <div class="task-description">
                            <h3>–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                            <div id="task-description-text"></div>
                        </div>

                        <!-- –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ -->
                        <div class="code-editor-section">
                            <div class="editor-header">
                                <h3>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ</h3>
                                <button onclick="resetCode()" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</button>
                            </div>
                            <textarea id="code-editor" class="code-editor" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–æ–¥ –∑–¥–µ—Å—å..."></textarea>
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
                        <div class="submit-section">
                            <button onclick="submitSolution()" class="btn btn-primary btn-large">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                        </div>

                        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ -->
                        <div id="test-results" class="test-results" style="display: none;">
                            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏</h3>
                            <div id="test-results-content"></div>
                        </div>

                        <!-- –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π -->
                        <div class="submissions-history">
                            <h3>–ú–æ–∏ —Ä–µ—à–µ–Ω–∏—è</h3>
                            <div id="submissions-list" class="submissions-list">
                                <!-- –†–µ—à–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <div id="message" class="message" style="display: none;"></div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
    <div id="create-task-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
                <button class="modal-close" onclick="closeCreateTaskModal()">&times;</button>
            </div>
            <form id="create-task-form" onsubmit="createTask(event)">
                <div class="form-group">
                    <label for="task-title-input">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *</label>
                    <input type="text" id="task-title-input" required maxlength="255">
                </div>
                <div class="form-group">
                    <label for="task-description-input">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="task-description-input" rows="5" maxlength="2000"></textarea>
                </div>
                <div class="form-group">
                    <label for="task-code-template">–®–∞–±–ª–æ–Ω –∫–æ–¥–∞</label>
                    <textarea id="task-code-template" rows="10" class="code-input" placeholder="#include <stdio.h>&#10;&#10;int main() {&#10;    // –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å&#10;    return 0;&#10;}"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-difficulty-select">–°–ª–æ–∂–Ω–æ—Å—Ç—å *</label>
                        <select id="task-difficulty-select" required>
                            <option value="EASY">–õ–µ–≥–∫–∞—è</option>
                            <option value="MEDIUM">–°—Ä–µ–¥–Ω—è—è</option>
                            <option value="HARD">–°–ª–æ–∂–Ω–∞—è</option>
                            <option value="EXPERT">–≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-xp-reward">–û–ø—ã—Ç –∑–∞ —Ä–µ—à–µ–Ω–∏–µ</label>
                        <input type="number" id="task-xp-reward" min="1" value="10">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-lesson-select">–£—Ä–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <select id="task-lesson-select">
                            <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-skill-select">–ù–∞–≤—ã–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <select id="task-skill-select">
                            <option value="">–ù–µ –≤—ã–±—Ä–∞–Ω</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="task-test-cases">–¢–µ—Å—Ç—ã (JSON) *</label>
                    <textarea id="task-test-cases" rows="8" required placeholder='{"tests": [{"input": "5", "output": "15"}, {"input": "10", "output": "55"}]}'></textarea>
                    <small>–§–æ—Ä–º–∞—Ç: {"tests": [{"input": "...", "output": "..."}, ...]}</small>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="task-published"> –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É
                    </label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeCreateTaskModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/tasks.js"></script>
    <script src="js/task-create.js"></script>
</body>
</html>

